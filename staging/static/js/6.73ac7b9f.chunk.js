(this["webpackJsonp@uniswap/interface"]=this["webpackJsonp@uniswap/interface"]||[]).push([[6],{1945:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n(3),c=n.n(r),a=n(16),s=n(123),i=n(228),o=n(7),l=n(532);function u(e){switch(e){case o.e.MAINNET:case o.e.RINKEBY:case o.e.ROPSTEN:case o.e.KOVAN:case o.e.GOERLI:return l.b[e][0];default:return l.a[e][0]}}var b=function(){var e=Object(a.a)(c.a.mark((function e(t,n){var r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(o.g)(n)){e.next=4;break}throw new Error("Chain ".concat(n," not supported for connector (").concat(typeof t,")"));case 4:if(t!==s.f.connector&&t!==s.e.connector){e.next=9;break}return e.next=7,t.activate(n);case 7:e.next=13;break;case 9:return r=Object(i.b)(n),a={chainId:n,chainName:r.label,rpcUrls:[u(n)],nativeCurrency:r.nativeCurrency,blockExplorerUrls:[r.explorer]},e.next=13,t.activate(a);case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},1982:function(e,t,n){},1984:function(e,t,n){},1985:function(e,t,n){},2034:function(e,t,n){"use strict";n.r(t);var r,c=n(24),a=n(3),s=n.n(a),i=n(16),o=n(10),l=n(9),u=n(2),b=n(65),d=n(116),j=n(20),f=n(804),O=n(8),g=n(95),p=n(70),x=n(195),h=n(7),m=n(33),v=n(48),w=n(90),N=n(798),I=n(801),E=n(40),k=n(125),A=n(1),y=n(1087),S=n(92),z=n(12),T=n(1945),C=(n(194),n(379),n(1982),n(0)),P=u.default.div.withConfig({componentId:"sc-rcepl8-0"})(["border-top:1px solid ",";color:",";display:flex;flex-direction:column;margin-bottom:8px;padding:12px 16px;border-bottom-left-radius:12px;border-bottom-right-radius:12px;"],(function(e){return e.theme.backgroundOutline}),(function(e){return e.theme.textPrimary})),R=Object(u.default)(y.a).withConfig({componentId:"sc-rcepl8-1"})(["width:14px;margin-right:4px;color:",";"],(function(e){return e.theme.accentWarning})),_=Object(u.default)(z.s.BodyPrimary).withConfig({componentId:"sc-rcepl8-2"})(["align-items:center;color:",";display:flex;justify-content:center;margin:12px 0 !important;text-align:center;"],(function(e){return e.theme.accentWarning})),L=function(e){var t=e.disabled,n=e.children,r=e.onClick;return Object(C.jsx)(v.c,{as:"button",color:"explicitWhite",className:"m29kpj4 rgw6ezcr rgw6ezb3 rgw6ez7ol rgw6ez2l9 rgw6ez24r rgw6ez4k9 rgw6ez7id rgw6ez7ax rgw6ezd3 rgw6ez79d rgw6ez443 rgw6ez3q9",disabled:t,onClick:r,children:n})},G=function(e){var t=e.children;return t?Object(C.jsxs)(_,{fontSize:"14px",lineHeight:"20px",children:[Object(C.jsx)(R,{}),t]}):null},B=[E.d.FETCHING_ROUTE,E.d.CONFIRMING_IN_WALLET,E.d.FETCHING_FINAL_ROUTE,E.d.PROCESSING_TRANSACTION],D=function(e){var t=e.totalEthPrice,n=e.totalUsdPrice,r=e.bagStatus,c=e.fetchAssets,a=e.eventProperties,s=Object(S.o)(),i=Object(j.useWeb3React)(),o=i.account,u=i.chainId,b=i.connector,f=Boolean(o&&u),y=Object(N.a)((function(e){return e.setBagExpanded})),R=Object(I.a)().balance,_=Object(A.useMemo)((function(){if(f&&u===h.e.MAINNET)return Object(d.parseEther)(R).gte(t)}),[f,u,R,t]),D=Object(A.useMemo)((function(){var e=c,t=Object(C.jsx)(O.b,{id:"Something went wrong"}),n=!0,a=null;return f&&u!==h.e.MAINNET?(e=function(){return Object(T.a)(b,h.e.MAINNET)},t=Object(C.jsx)(O.b,{id:"Switch networks"}),n=!1,a=Object(C.jsx)(O.b,{id:"Wrong network"})):!1===_?(t=Object(C.jsx)(O.b,{id:"Pay"}),n=!0,a=Object(C.jsx)(O.b,{id:"Insufficient funds"})):r===E.d.WARNING?a=Object(C.jsx)(O.b,{id:"Something went wrong. Please try again."}):f?r===E.d.FETCHING_FINAL_ROUTE||r===E.d.CONFIRMING_IN_WALLET?(n=!0,t=Object(C.jsx)(O.b,{id:"Proceed in wallet"})):r===E.d.PROCESSING_TRANSACTION?(n=!0,t=Object(C.jsx)(O.b,{id:"Transaction pending"})):!0===_&&(n=!1,t=Object(C.jsx)(O.b,{id:"Pay"})):(e=function(){s(),y({bagExpanded:!1})},n=!1,t=Object(C.jsx)(O.b,{id:"Connect wallet"})),{buttonText:t,disabled:n,warningText:a,handleClick:e}}),[r,u,f,b,c,y,_,s]),F=D.buttonText,U=D.disabled,M=D.warningText,W=D.handleClick,H=B.includes(r);return Object(C.jsx)(v.b,{className:"rgw6ez2al rgw6ez2g3",children:Object(C.jsxs)(P,{children:[Object(C.jsxs)(v.b,{gap:"4",paddingTop:"8",paddingBottom:"20",children:[Object(C.jsxs)(v.c,{justifyContent:"space-between",children:[Object(C.jsx)(m.b,{children:Object(C.jsx)(z.s.HeadlineSmall,{children:"Total"})}),Object(C.jsx)(m.b,{children:Object(C.jsxs)(z.s.HeadlineSmall,{children:[Object(k.p)(t.toString()),"\xa0ETH"]})})]}),Object(C.jsx)(v.c,{justifyContent:"flex-end",color:"textSecondary",className:w.c,children:"".concat(Object(k.i)(n,!0))})]}),Object(C.jsxs)(g.TraceEvent,{events:[p.BrowserEvent.onClick],name:p.EventName.NFT_BUY_BAG_PAY,element:p.ElementName.NFT_BUY_BAG_PAY_BUTTON,properties:Object(l.a)({},a),shouldLogImpression:f&&!U,children:[Object(C.jsx)(G,{children:M}),Object(C.jsxs)(L,{onClick:W,disabled:U,children:[H&&Object(C.jsx)(x.a,{size:"20px",stroke:"white"}),F]})]})]})})},F=n(42),U=n(551),M=n(85),W=n(55),H=n(37),V=n(388),q=n(557),Y=n(258),J=n(1950),Q=n(1946),K=n(155),X=n(510),Z=function(e){var t=e.sectionTitle,n=e.caption,r=void 0===n?void 0:n,c=e.title,a=void 0===c?void 0:c,l=e.rows,u=e.index,b=e.openIndex,d=e.isSuccessScreen,j=void 0!==d&&d,f=Object(A.useState)(!1),O=Object(o.a)(f,2),g=O[0],p=O[1],x=l.some((function(e){return e.status!==E.f.APPROVED})),h=Object(H.m)((function(e){return e.sellAssets})),N=Object(H.m)((function(e){return e.removeAssetMarketplace})),I=function(e){if(1===u){var t,n=Object(F.a)(h);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.asset_contract.address===e.collectionAddress&&N(r,e.marketplace)}}catch(c){n.e(c)}finally{n.f()}}else N(e.asset,e.marketplace)};function k(e){var t,n,r=e,c=r.asset.newListings;return null!==(t=null===c||void 0===c||null===(n=c.find((function(e){return e.marketplace.name===r.marketplace.name})))||void 0===n?void 0:n.price)&&void 0!==t?t:0}Object(A.useEffect)((function(){p(u===b)}),[u,b]);var y=!x&&l.length>0&&!j;return Object(C.jsxs)(v.c,{flexWrap:"wrap",className:w.l,marginTop:"10",marginBottom:"10",onClick:function(){return l.length>0&&p(!g)},color:y?"accentSuccess":"textPrimary",children:[y&&Object(C.jsx)(M.e,{style:{marginRight:"8px"}}),t,!j&&Object(C.jsx)(M.q,{className:Object(K.default)("".concat(g?"":Q.c," ").concat(Q.b))}),(g||j)&&Object(C.jsxs)(v.b,{gap:"12",width:"full",paddingTop:j?"28":"auto",className:Object(K.default)(!j&&Q.e),children:[r&&Object(C.jsx)(m.b,{color:"textPrimary",fontWeight:"normal",className:r,children:r}),a&&Object(C.jsx)(m.b,{color:"textSecondary",className:w.a,children:a}),Object(C.jsx)(v.b,{gap:"8",children:l.map((function(e,t){var n;return Object(C.jsxs)(v.b,{gap:"8",children:[Object(C.jsxs)(v.c,{children:[e.images.map((function(t,n){return Object(C.jsx)(m.b,{as:"img",height:"20",width:"20",borderRadius:0===n&&e.collectionAddress?"round":"4",style:{zIndex:2-n},className:Q.d,src:t,alt:e.name},n)})),Object(C.jsx)(m.b,{marginLeft:"8",marginRight:"auto",fontWeight:"normal",color:"textPrimary",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",maxWidth:{sm:"max",md:e.status===E.f.REJECTED||e.status===E.f.FAILED?"120":"full"},className:w.c,children:e.name}),j?k(e)&&"".concat(Object(X.c)(Object(X.g)(null!==(n=k(e))&&void 0!==n?n:0).toString())," ETH"):e.status===E.f.APPROVED?Object(C.jsx)(M.e,{height:"20",width:"20"}):e.status===E.f.FAILED||e.status===E.f.REJECTED?Object(C.jsxs)(v.c,{gap:"4",children:[Object(C.jsx)(m.b,{fontWeight:"normal",fontSize:"14",color:"textSecondary",children:e.status}),Object(C.jsx)(M.z,{})]}):e.status===E.f.SIGNING&&Object(C.jsx)(M.F,{height:"20",width:"20",stroke:"#4673FA"})]}),(e.status===E.f.FAILED||e.status===E.f.REJECTED)&&Object(C.jsxs)(v.c,{gap:"8",justifyContent:"center",children:[Object(C.jsx)(m.b,{width:"120",as:"button",className:w.f,borderRadius:"12",border:"none",color:"red400",height:"32",cursor:"pointer",style:{backgroundColor:"#FA2B391A"},onClick:function(){var t=Object(i.a)(s.a.mark((function t(n){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.stopPropagation(),I(e);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),children:"Remove"}),Object(C.jsx)(m.b,{width:"120",as:"button",className:w.f,borderRadius:"12",border:"none",color:"genieBlue",height:"32",cursor:"pointer",style:{backgroundColor:"#4C82FB29"},onClick:function(){var t=Object(i.a)(s.a.mark((function t(n){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.stopPropagation(),!e.callback){t.next=4;break}return t.next=4,e.callback();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),children:"Try again"})]})]},t)}))})]})]})},$=n(1947),ee=function(){var e=Object(j.useWeb3React)().provider,t=Object(H.m)((function(e){return e.sellAssets})),n=null===e||void 0===e?void 0:e.getSigner(),r=Object(H.k)((function(e){return e.listings})),c=Object(H.k)((function(e){return e.setListings})),a=Object(H.k)((function(e){return e.collectionsRequiringApproval})),u=Object(H.k)((function(e){return e.setCollectionsRequiringApproval})),b=Object(A.useState)(0),d=Object(o.a)(b,2),f=d[0],O=d[1],x=Object(H.k)((function(e){return e.listingStatus})),h=Object(H.k)((function(e){return e.setListingStatus})),N=Object(A.useState)(!1),I=Object(o.a)(N,2),k=I[0],y=I[1],S=Object(H.k)((function(e){return e.looksRareNonce})),z=Object(H.k)((function(e){return e.setLooksRareNonce})),T=Object(H.k)((function(e){return e.getLooksRareNonce})),P=Object(H.f)((function(e){return e.toggleBag})),R=Object(A.useRef)(S),_=Object(H.j)(),L=Object(g.useTrace)({modal:p.ModalName.NFT_LISTING});Object(A.useEffect)((function(){H.k.subscribe((function(e){return R.current=e.looksRareNonce}))}),[]);var G=Object(A.useMemo)((function(){return Object($.d)(t)}),[t]),B=Object(A.useState)(0),D=Object(o.a)(B,2),K=D[0],X=D[1];Object(A.useEffect)((function(){Object(q.a)().then((function(e){X(e||0)}))}),[]);var ee=Object(l.a)({collection_addresses:t.map((function(e){return e.asset_contract.address})),token_ids:t.map((function(e){return e.tokenId})),marketplaces:Array.from(new Set(r.map((function(e){return e.marketplace.name})))),list_quantity:r.length,usd_value:K*G},L),te=Object(l.a)({list_quantity:r.length,usd_value:K*G},L);Object(A.useEffect)((function(){(null===a||void 0===a?void 0:a.length)&&y(a.every((function(e){return e.status===E.f.APPROVED}))),!k||x!==E.f.PENDING&&x!==E.f.CONTINUE&&x!==E.f.SIGNING||(ie(),ae())}),[a,k]);var ne=Object(A.useMemo)((function(){return a.every((function(e){return e.status===E.f.APPROVED||e.status===E.f.PAUSED}))}),[a]),re=Object(A.useMemo)((function(){return r.every((function(e){return e.status===E.f.APPROVED||e.status===E.f.PAUSED}))}),[r]);Object(A.useEffect)((function(){x===E.f.SIGNING&&ne&&re&&ie()}),[ne,re]);var ce=function(){var e=Object(i.a)(s.a.mark((function e(){var t,r,c,i,o,b,d;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return Object(g.sendAnalyticsEvent)(p.EventName.NFT_SELL_START_LISTING,Object(l.a)({},ee)),h(E.f.SIGNING),t=U.b[U.a.MAINNET],e.next=7,n.getAddress();case 7:return r=e.sent,e.next=10,Object(V.j)(r);case 10:c=e.sent,z(null!==c&&void 0!==c?c:0),(null===a||void 0===a?void 0:a.some((function(e){return e.status===E.f.PAUSED})))||(h(E.f.SIGNING),O(1)),i=t.TRANSFER_MANAGER_ERC721,o=Object(F.a)(a),e.prev=15,o.s();case 17:if((b=o.n()).done){e.next=29;break}if(d=b.value,e.t0=Object($.h)(d.status),!e.t0){e.next=27;break}if(!_){e.next=26;break}return e.next=24,Object($.a)(d,a,u,n,i,se);case 24:e.next=27;break;case 26:Object($.a)(d,a,u,n,i,se);case 27:e.next=17;break;case 29:e.next=34;break;case 31:e.prev=31,e.t1=e.catch(15),o.e(e.t1);case 34:return e.prev=34,o.f(),e.finish(34);case 37:case"end":return e.stop()}}),e,null,[[15,31,34,37]])})));return function(){return e.apply(this,arguments)}}(),ae=function(){var t=Object(i.a)(s.a.mark((function t(){var a,i,o,u,b,d;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n&&e){t.next=2;break}return t.abrupt("return");case 2:h(E.f.SIGNING),O(2),i=Object(F.a)(r),t.prev=5,i.s();case 7:if((o=i.n()).done){t.next=15;break}if(u=o.value,t.t0=Object($.h)(u.status),!t.t0){t.next=13;break}return t.next=13,Object($.g)(u,r,c,n,e,T,z,se);case 13:t.next=7;break;case 15:t.next=20;break;case 17:t.prev=17,t.t1=t.catch(5),i.e(t.t1);case 20:return t.prev=20,i.f(),t.finish(20);case 23:return b=r.every((function(e){return e.status===E.f.APPROVED})),d=r.some((function(e){return e.status===E.f.PAUSED})),b?(O(0),h(E.f.APPROVED)):d||h(E.f.FAILED),Object(g.sendAnalyticsEvent)(p.EventName.NFT_LISTING_COMPLETED,Object(l.a)({signatures_requested:r.length,signatures_approved:r.filter((function(e){return e.status===E.f.APPROVED}))},te)),t.t2=V.i,t.t3=r,t.next=31,null===n||void 0===n?void 0:n.getAddress();case 31:if(t.t5=a=t.sent,t.t4=null!==t.t5,!t.t4){t.next=35;break}t.t4=void 0!==a;case 35:if(!t.t4){t.next=39;break}t.t6=a,t.next=40;break;case 39:t.t6="";case 40:return t.t7=t.t6,t.next=43,(0,t.t2)(t.t3,t.t7);case 43:case"end":return t.stop()}}),t,null,[[5,17,20,23]])})));return function(){return t.apply(this,arguments)}}(),se=function(){var e,t=Object(F.a)(a);try{for(t.s();!(e=t.n()).done;){var n=e.value;Object($.e)(n,a,u)}}catch(l){t.e(l)}finally{t.f()}var s,i=Object(F.a)(r);try{for(i.s();!(s=i.n()).done;){var o=s.value;Object($.e)(o,r,c)}}catch(l){i.e(l)}finally{i.f()}},ie=function(){var e,t=Object(F.a)(a);try{for(t.s();!(e=t.n()).done;){var n=e.value;Object($.f)(n,a,u)}}catch(l){t.e(l)}finally{t.f()}var s,i=Object(F.a)(r);try{for(i.s();!(s=i.n()).done;){var o=s.value;Object($.f)(o,r,c)}}catch(l){i.e(l)}finally{i.f()}},oe=Object(A.useMemo)((function(){return x===E.f.APPROVED}),[x]);return Object(C.jsx)(g.Trace,{modal:p.ModalName.NFT_LISTING,children:Object(C.jsxs)(v.b,{paddingTop:"20",paddingBottom:"20",paddingLeft:"12",paddingRight:"12",children:[Object(C.jsxs)(v.c,{className:w.k,marginBottom:"10",children:[_&&!oe&&Object(C.jsx)(m.b,{paddingTop:"4",marginRight:"4",onClick:P,children:Object(C.jsx)(M.n,{height:28,width:28})}),oe?"Success!":"Listing ".concat(t.length," NFTs"),Object(C.jsx)(m.b,{as:"button",border:"none",color:"textSecondary",backgroundColor:"backgroundSurface",marginLeft:"auto",marginRight:"0",paddingRight:"0",display:{sm:"flex",md:"none"},cursor:"pointer",onClick:P,children:Object(C.jsx)(M.V,{height:28,width:28,fill:W.c.colors.textPrimary})})]}),Object(C.jsx)(v.b,{overflowX:"hidden",overflowY:"auto",style:{maxHeight:"60vh"},children:oe?Object(C.jsx)(g.Trace,{name:p.EventName.NFT_LISTING_COMPLETED,properties:Object(l.a)({list_quantity:r.length,usd_value:K*G},L),children:Object(C.jsx)(Z,{sectionTitle:"Listed ".concat(r.length," item").concat(Object(Y.a)(r.length)," for sale"),rows:r,index:0,openIndex:f,isSuccessScreen:!0})}):Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(Z,{sectionTitle:"Approve ".concat(a.length," collection").concat(Object(Y.a)(a.length)),title:"COLLECTIONS",rows:a,index:1,openIndex:f}),Object(C.jsx)(Z,{sectionTitle:"Confirm ".concat(r.length," listing").concat(Object(Y.a)(r.length)),caption:"Now you can sign to list each item",title:"NFTS",rows:r,index:2,openIndex:f})]})}),Object(C.jsx)("hr",{className:Q.f}),Object(C.jsxs)(v.c,{className:w.l,marginTop:"12",marginBottom:oe?"8":"20",children:["Return if sold",Object(C.jsxs)(v.c,{className:w.m,marginLeft:"auto",marginRight:"0",children:[G,"\xa0ETH"]})]}),oe?Object(C.jsxs)(m.b,{as:"span",className:w.g,color:"textSecondary",children:["Status:"," ",Object(C.jsx)(m.b,{as:"span",color:"accentSuccess",children:"Confirmed"})]}):Object(C.jsx)(J.a,{onClick:function(){ie(),k?ae():ce()},buttonText:"Start listing",showWarningOverride:_}),(x===E.f.PENDING||x===E.f.SIGNING)&&Object(C.jsx)(m.b,{as:"button",border:"none",backgroundColor:"backgroundSurface",cursor:"pointer",color:"orange",className:Q.a,onClick:function(){se()},type:"button",children:"Stop listing"})]})})},te=n(1960),ne=n(1961),re=n(985),ce=n(355),ae=n(1006),se=n.n(ae),ie=(n(1984),n(41)),oe=n(38),le=Object(u.keyframes)(r||(r=Object(oe.a)(["\n  0% {\n    stroke-dashoffset: 1000;\n  }\n  100% {\n    stroke-dashoffset: 0;\n  }\n"]))),ue=u.default.circle.withConfig({componentId:"sc-5ix82i-0"})(["stroke-dasharray:1000;stroke-dashoffset:0;-webkit-animation:"," linear;animation:"," linear;animation-duration:160s;stroke:",";"],le,le,(function(e){return e.theme.accentAction})),be=function(){return Object(C.jsx)(m.b,{display:"flex",position:"absolute",children:Object(C.jsx)("svg",{height:"18px",width:"18px",children:Object(C.jsx)(ue,{strokeWidth:"".concat(1.5),strokeLinecap:"round",style:{transform:"rotate(90deg)",transformOrigin:"50% 50%"},fill:"transparent",r:"8px",cx:"9px",cy:"9px"})})})},de=n(117),je=n(301),fe=n(72),Oe=(n(1985),"_1kuawc1 rgw6ez2a9 rgw6ez2fr rgw6ez2kx rgw6ez24f rgw6ez4ax rgw6ez3px rgw6ez79d rgw6ez1br rgw6ez7ax"),ge="rgw6ez12r rgw6ez19f rgw6ez463 rgw6ez7ap",pe="_1kuawc7",xe="_1kuawcb rgw6ezb3 rgw6ezcx rgw6ez7lh rgw6ez429 rgw6ez423",he="rgw6ezcr rgw6ezax rgw6ez7oh rgw6ez7lh rgw6ez423 rgw6ez429 rgw6ez4b3",me="rgw6ez3u9",ve=Object(u.default)(ie.p).withConfig({componentId:"sc-iebvtt-0"})(["border-radius:12px;font-size:14px;line-height:16px;margin-left:16px;padding:12px 14px;"]),we=Object(u.default)(ie.p).withConfig({componentId:"sc-iebvtt-1"})(["border-radius:12px;flex:1 1 auto;font-size:14px;padding:8px;width:50%;"]),Ne=u.default.div.withConfig({componentId:"sc-iebvtt-2"})(["position:absolute;display:block;right:-11px;top:-11px;z-index:1;transition:250ms;width:45px;height:45px;display:flex;align-items:center;justify-content:center;"]),Ie=function(e){var t=e.onClick;return Object(C.jsx)(Ne,{onClick:t,children:Object(C.jsx)(M.r,{})})},Ee=function(){return Object(C.jsx)(m.b,{position:"relative",background:"loadingBackground",className:ge,children:Object(C.jsxs)(m.b,{position:"absolute",textAlign:"center",left:"1/2",top:"1/2",style:{transform:"translate3d(-50%, -50%, 0)"},color:"gray500",fontSize:"12",fontWeight:"normal",children:["Image",Object(C.jsx)("br",{}),"not",Object(C.jsx)("br",{}),"available"]})})},ke=function(e){var t,n=e.asset,r=e.usdPrice,c=e.removeAsset,a=e.showRemove,s=e.grayscale,i=e.isMobile,l=Object(A.useState)(!1),u=Object(o.a)(l,2),b=u[0],j=u[1],f=Object(A.useState)(!n.smallImageUrl),O=Object(o.a)(f,2),g=O[0],p=O[1],x=Object(A.useState)(!1),h=Object(o.a)(x,2),w=h[0],N=h[1],I=Object(A.useCallback)((function(){return N(!0)}),[]),E=Object(A.useCallback)((function(){return N(!1)}),[]),y=Boolean(a&&w&&!i),S=n.updatedPriceInfo?n.updatedPriceInfo.ETHPrice:n.priceInfo.ETHPrice,z=Object(k.p)(S),T=Object(k.i)(r?parseFloat(Object(d.formatEther)(S))*r:r,!0),P=Object(A.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),c([n])}),[n,c]);return Object(C.jsx)(fe.b,{to:Object(k.s)(n),style:{textDecoration:"none"},children:Object(C.jsxs)(v.c,{className:Oe,onMouseEnter:I,onMouseLeave:E,children:[Object(C.jsxs)(m.b,{position:"relative",display:"flex",children:[a&&i&&Object(C.jsx)(Ie,{onClick:P}),!g&&Object(C.jsx)(m.b,{as:"img",src:n.smallImageUrl,alt:n.name,className:Object(K.default)(ge,s&&!w&&pe),onLoad:function(){j(!0)},onError:function(){p(!0)},visibility:b?"visible":"hidden"}),!b&&Object(C.jsx)(m.b,{position:"absolute",className:"".concat(ge," ").concat(je.b)}),g&&Object(C.jsx)(Ee,{})]}),Object(C.jsxs)(v.b,{overflow:"hidden",width:"full",color:s?"textSecondary":"textPrimary",children:[Object(C.jsxs)(v.c,{overflow:"hidden",width:"full",whiteSpace:"nowrap",children:[Object(C.jsx)(m.b,{className:xe,children:null!==(t=n.name)&&void 0!==t?t:"#".concat(n.tokenId)}),n.susFlag&&Object(C.jsx)(de.s,{})]}),Object(C.jsxs)(v.c,{overflow:"hidden",whiteSpace:"nowrap",gap:"2",children:[Object(C.jsx)(m.b,{className:he,children:n.collectionName}),n.collectionIsVerified&&Object(C.jsx)(M.U,{className:me})]})]}),y&&Object(C.jsx)(ve,{onClick:P,emphasis:ie.d.medium,size:ie.m.medium,children:"Remove"}),(!y||i)&&Object(C.jsxs)(v.b,{flexShrink:"0",alignItems:"flex-end",children:[Object(C.jsxs)(m.b,{className:"_1kuawc9 rgw6ez3p9 rgw6ezb3 rgw6ezd3 rgw6ez3u9",children:[z,"\xa0ETH"]}),Object(C.jsx)(m.b,{className:he,children:T})]})]})})},Ae=function(e){var t,n=e.asset,r=e.usdPrice,c=e.markAssetAsReviewed,a=e.top,s=e.isMobile,i=b.a.from(null===(t=n.updatedPriceInfo)||void 0===t?void 0:t.ETHPrice).gt(b.a.from(n.priceInfo.ETHPrice)),o=Object(A.useCallback)((function(e){e.preventDefault(),e.stopPropagation();c(n,!1)}),[n,c]),l=Object(A.useCallback)((function(e){e.preventDefault(),e.stopPropagation();c(n,!0)}),[n,c]);return Object(C.jsxs)(v.b,{className:"rgw6ez2ll rgw6ez253 rgw6ezjx rgw6ezpf rgw6ez4pl rgw6ez3pl rgw6ez4ax rgw6ez79p rgw6ez7j5 rgw6ez51l rgw6ez5mf rgw6ez1br rgw6ez79d",borderTopColor:a?"backgroundOutline":"transparent",children:[Object(C.jsxs)(v.c,{className:"rgw6ezcr rgw6ezax rgw6ez7oh rgw6ez48r rgw6ez3p9",children:[i?Object(C.jsx)(M.Q,{}):Object(C.jsx)(M.P,{}),Object(C.jsx)(m.b,{children:"Price ".concat(i?"increased":"decreased"," from ").concat(Object(k.p)(n.priceInfo.ETHPrice)," ETH")})]}),Object(C.jsx)(m.b,{style:{marginLeft:"-8px",marginRight:"-8px"},children:Object(C.jsx)(ke,{asset:n,usdPrice:r,removeAsset:function(){},isMobile:s})}),Object(C.jsxs)(v.c,{gap:"8",justifyContent:"space-between",children:[Object(C.jsx)(we,{onClick:o,emphasis:ie.d.medium,size:ie.m.small,children:"Remove"}),Object(C.jsx)(we,{onClick:l,emphasis:ie.d.high,size:ie.m.small,children:"Keep"})]})]})},ye=function(e){var t=e.assets;return Object(C.jsx)(v.b,{display:"grid",style:{gridTemplateColumns:"repeat(".concat(t.length,", 20px)"),width:"".concat(32+20*(t.length-1),"px")},children:t.map((function(e,t){return Object(C.jsx)(m.b,{as:"img",src:e.smallImageUrl,width:"32",height:"32",borderStyle:"solid",borderWidth:"1px",borderColor:"backgroundSurface",borderRadius:"4",style:{zIndex:t},className:pe},"".concat(e.address,"-").concat(e.tokenId))}))})},Se=function(e){var t=e.assets,n=e.usdPrice,r=e.clearUnavailableAssets,c=e.didOpenUnavailableAssets,a=e.setDidOpenUnavailableAssets,s=e.isMobile,i=Object(A.useReducer)((function(e){return!e}),!1),l=Object(o.a)(i,2),u=l[0],b=l[1],d=Object(A.useState)(8),j=Object(o.a)(d,2),f=j[0],O=j[1];if(Object(A.useEffect)((function(){if(f){var e=setInterval((function(){O(f-1)}),1e3);return function(){return clearInterval(e)}}c||(r(),a(!1))}),[f,r,c,a]),!t||0===t.length)return null;var g=t.length>1,p=u||!g;return Object(C.jsx)(v.b,{className:"rgw6ez2ll rgw6ez253 rgw6ezjx rgw6ezpf rgw6ez4pl rgw6ez3px rgw6ez4ax rgw6ez79p rgw6ez7j5 rgw6ez51l rgw6ez5yl rgw6ez5mf rgw6ez1br",children:Object(C.jsxs)(v.b,{children:[Object(C.jsxs)(v.c,{justifyContent:"space-between",marginBottom:p?"12":"0",cursor:g?"pointer":"default",onClick:function(){g&&(!c&&a(!0),b())},children:[Object(C.jsxs)(v.c,{gap:"12",color:"textSecondary",className:w.c,children:[!p&&Object(C.jsx)(ye,{assets:t.slice(0,5)}),"No longer available"]}),g&&Object(C.jsx)(v.c,{color:"textSecondary",children:u?Object(C.jsx)(M.p,{}):Object(C.jsx)(M.m,{})}),!c&&Object(C.jsxs)(v.c,{position:"relative",width:"20",height:"20",color:"textPrimary",justifyContent:"center",cursor:"pointer",onClick:r,children:[Object(C.jsx)(be,{}),Object(C.jsx)(M.s,{})]})]}),Object(C.jsx)(v.b,{gap:"8",style:{marginLeft:"-8px",marginRight:"-8px"},children:p&&t.map((function(e){return Object(C.jsx)(ke,{asset:e,usdPrice:n,removeAsset:function(){},grayscale:!0,isMobile:s},e.id)}))})]})})},ze=function(){var e=Object(H.f)((function(e){return e.bagStatus})),t=Object(H.f)((function(e){return e.setBagStatus})),n=Object(H.f)((function(e){return e.markAssetAsReviewed})),r=Object(H.f)((function(e){return e.didOpenUnavailableAssets})),c=Object(H.f)((function(e){return e.setDidOpenUnavailableAssets})),a=Object(H.f)((function(e){return e.itemsInBag})),s=Object(H.f)((function(e){return e.setItemsInBag})),i=Object(H.f)((function(e){return e.removeAssetsFromBag})),o=Object(H.j)(),u=Object(A.useMemo)((function(){return Object(k.F)(a)}),[a]),b=Object(ce.useQuery)(["fetchPrice",{}],(function(){return Object(k.k)()}),{}).data,d=Object(A.useMemo)((function(){return{unchangedAssets:u.filter((function(e){return e.status===E.c.ADDED_TO_BAG||e.status===E.c.REVIEWED})).map((function(e){return e.asset})),priceChangedAssets:u.filter((function(e){return e.status===E.c.REVIEWING_PRICE_CHANGE})).map((function(e){return e.asset})),unavailableAssets:u.filter((function(e){return e.status===E.c.UNAVAILABLE})).map((function(e){return e.asset})),availableItems:u.filter((function(e){return e.status!==E.c.UNAVAILABLE}))}}),[u]),j=d.unchangedAssets,f=d.priceChangedAssets,O=d.unavailableAssets,x=d.availableItems;return Object(A.useEffect)((function(){var n=f.length>0,r=u.length>0;n&&Object(g.sendAnalyticsEvent)(p.EventName.NFT_BUY_BAG_CHANGED,Object(l.a)({usd_value:b,bag_quantity:u},Object(k.l)(f))),e!==E.d.IN_REVIEW||n||t(r?E.d.CONFIRM_REVIEW:E.d.ADDING_TO_BAG),e!==E.d.CONFIRM_REVIEW||r||t(E.d.ADDING_TO_BAG)}),[e,u,f,t,b]),Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)(v.b,{display:f.length>0||O.length>0?"flex":"none",children:[O.length>0&&Object(C.jsx)(g.Trace,{name:p.EventName.NFT_BUY_BAG_CHANGED,properties:Object(l.a)({usd_value:b,bag_quantity:u.length},Object(k.l)(O)),shouldLogImpression:!0,children:Object(C.jsx)(Se,{assets:O,usdPrice:b,clearUnavailableAssets:function(){return s(x)},didOpenUnavailableAssets:r,setDidOpenUnavailableAssets:c,isMobile:o})}),f.map((function(e,t){return Object(C.jsx)(Ae,{asset:e,usdPrice:b,markAssetAsReviewed:n,top:0===t&&0===O.length,isMobile:o},e.id)}))]}),Object(C.jsx)(v.b,{gap:"8",children:j.slice(0).reverse().map((function(e){return Object(C.jsx)(ke,{asset:e,usdPrice:b,removeAsset:i,showRemove:!0,isMobile:o},e.id)}))})]})},Te=n(323),Ce=Object(u.default)(z.b).withConfig({componentId:"sc-bq6y8h-0"})(["color:",";cursor:pointer;font-weight:600;font-size:14px;line-height:16px;:active{text-decoration:none;}"],(function(e){return e.theme.textSecondary})),Pe=u.default.button.withConfig({componentId:"sc-bq6y8h-1"})(["align-items:center;background-color:transparent;border-radius:8px;border:none;color:",";cursor:pointer;display:flex;flex-direction:row;justify-content:flex-end;margin-left:auto;padding:2px;opacity:1;",""],(function(e){return e.theme.textPrimary}),Te.a),Re=u.default.div.withConfig({componentId:"sc-bq6y8h-2"})(["align-items:center;background-color:",";border-radius:100px;font-weight:bold;color:",";display:flex;font-size:10px;justify-content:center;min-width:",";min-height:",";padding:4px 6px;"],(function(e){return e.theme.accentAction}),(function(e){return e.theme.accentTextLightPrimary}),(function(e){return e.sizing}),(function(e){return e.sizing})),_e=u.default.div.withConfig({componentId:"sc-bq6y8h-3"})(["align-items:center;display:flex;flex-direction:row;gap:8px;justify-content:flex-start;margin:16px 20px;text-align:center;"]),Le=function(e){var t=e.numberOfAssets,n=e.closeBag,r=e.resetFlow,c=e.isProfilePage,a=Object(A.useMemo)((function(){return function(e){var t=e.toString().length;return"".concat(14+6*t,"px")}(t)}),[t]);return Object(C.jsxs)(_e,{children:[Object(C.jsx)(z.s.HeadlineSmall,{children:c?Object(C.jsx)(O.b,{id:"Sell"}):Object(C.jsx)(O.b,{id:"Bag"})}),t>0&&Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(Re,{sizing:a,children:t}),Object(C.jsx)(Ce,{onClick:r,children:"Clear all"})]}),Object(C.jsx)(Pe,{onClick:n,children:Object(C.jsx)(M.j,{})})]})},Ge=Object(u.default)(v.b).withConfig({componentId:"sc-xhr1rt-0"})(["gap:12px;margin-top:68px;"]),Be=function(){var e=Object(f.c)();return Object(C.jsxs)(Ge,{children:[Object(C.jsx)(v.a,{children:e?Object(C.jsx)(M.D,{color:W.c.colors.textTertiary}):Object(C.jsx)(M.k,{color:W.c.colors.textTertiary,height:"96px",width:"96px",strokeWidth:"1px"})}),e?Object(C.jsx)(v.a,{className:w.l,children:"No NFTs selected"}):Object(C.jsxs)(v.b,{gap:"16",children:[Object(C.jsx)(v.a,{className:w.l,style:{lineHeight:"24px"},children:"Your bag is empty"}),Object(C.jsx)(v.a,{fontSize:"12",fontWeight:"normal",color:"textSecondary",style:{lineHeight:"16px"},children:"Selected NFTs will appear here"})]})]})},De=function(e){var t=e.asset,n=Object(H.m)((function(e){return e.removeSellAsset})),r=Object(H.j)(),c=Object(A.useState)(!1),a=Object(o.a)(c,2),s=a[0],i=a[1],l=function(){return i(!s)},u=function(e){e.preventDefault(),e.stopPropagation(),n(t)};return Object(C.jsxs)(v.c,{className:Oe,onMouseEnter:l,onMouseLeave:l,children:[Object(C.jsxs)(m.b,{position:"relative",display:"flex",children:[r&&Object(C.jsx)(Ie,{onClick:u}),Object(C.jsx)("img",{src:t.smallImageUrl,alt:t.name,className:ge})]}),Object(C.jsxs)(v.b,{overflow:"hidden",width:"full",color:"textPrimary",children:[Object(C.jsx)(v.c,{overflow:"hidden",width:"full",justifyContent:"space-between",whiteSpace:"nowrap",gap:"16",children:Object(C.jsx)(m.b,{className:xe,children:t.name||"#".concat(t.tokenId)})}),Object(C.jsxs)(v.c,{overflow:"hidden",whiteSpace:"nowrap",gap:"2",children:[Object(C.jsx)(m.b,{className:he,children:t.asset_contract.name}),t.collectionIsVerified&&Object(C.jsx)(M.U,{className:me})]})]}),s&&!r&&Object(C.jsx)(ve,{onClick:u,emphasis:ie.d.medium,size:ie.m.medium,children:"Remove"})]})},Fe=function(){var e=Object(H.m)((function(e){return e.sellAssets}));return Object(C.jsx)(v.b,{children:e.length?e.map((function(e,t){return Object(C.jsx)(De,{asset:e},t)})):null})},Ue=u.default.div.withConfig({componentId:"sc-1cpp7nx-0"})(["position:fixed;background:rgba(0,0,0,0.7);top:72px;width:100%;height:100%;"]),Me=function(e){var t=e.top,n=e.show;return Object(C.jsx)(m.b,{marginX:"16",borderWidth:"1px",borderStyle:"solid",borderColor:"transparent",borderTopColor:t?"transparent":"backgroundOutline",borderBottomColor:t?"backgroundOutline":"transparent",opacity:n?"1":"0",transition:"250"})};t.default=function(){var e=Object(j.useWeb3React)(),t=e.account,n=e.provider,r=Object(H.m)((function(e){return{resetSellAssets:e.reset,sellAssets:e.sellAssets}}),se.a),a=r.resetSellAssets,u=r.sellAssets,O=Object(H.l)((function(e){var t=e.setProfilePageState;return{profilePageState:e.state,setProfilePageState:t}}),se.a),g=O.profilePageState,p=O.setProfilePageState,x=Object(H.f)((function(e){return Object(l.a)(Object(l.a)({},e),{},{bagIsLocked:e.isLocked,uncheckedItemsInBag:e.itemsInBag})}),se.a),h=x.bagStatus,N=x.setBagStatus,I=x.didOpenUnavailableAssets,y=x.setDidOpenUnavailableAssets,S=x.bagIsLocked,z=x.setLocked,T=x.reset,P=x.setItemsInBag,R=x.bagExpanded,_=x.toggleBag,L=x.setTotalEthPrice,G=x.setTotalUsdPrice,B=x.setBagExpanded,F=Object(H.f)((function(e){return{uncheckedItemsInBag:e.itemsInBag}})).uncheckedItemsInBag,U=Object(f.c)(),M=Object(f.a)(),W=Object(f.b)(),q=Object(H.j)(),Y=Object(H.n)((function(e){return e.sendTransaction})),J=Object(H.n)((function(e){return e.state})),Q=Object(H.n)((function(e){return e.setState})),K=Object(A.useRef)(J),X=Object(H.o)((function(e){return[e.setTransactionResponse]})),Z=Object(o.a)(X,1)[0],$=Object(ce.useQueryClient)(),ae=Object(A.useMemo)((function(){return Object(k.F)(F)}),[F]),ie=Object(A.useState)(!1),oe=Object(o.a)(ie,2),le=oe[0],ue=oe[1],be=Object(A.useState)(!1),de=Object(o.a)(be,2),je=de[0],fe=de[1],Oe=Object(A.useState)(0),ge=Object(o.a)(Oe,2),pe=ge[0],xe=ge[1],he=Object(ce.useQuery)(["fetchPrice",{}],(function(){return Object(k.k)()}),{}).data,me=Object(A.useMemo)((function(){var e=ae.reduce((function(e,t){return t.status!==E.c.UNAVAILABLE?e.add(b.a.from(t.asset.updatedPriceInfo?t.asset.updatedPriceInfo.ETHPrice:t.asset.priceInfo.ETHPrice)):e}),b.a.from(0));return{totalEthPrice:e,totalUsdPrice:he?parseFloat(Object(d.formatEther)(e))*he:void 0}}),[ae,he]),ve=me.totalEthPrice,we=me.totalUsdPrice,Ne=function(){var e=Object(i.a)(s.a.mark((function e(t){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Y(null===n||void 0===n?void 0:n.getSigner(),ae.filter((function(e){return e.status!==E.c.UNAVAILABLE})).map((function(e){return e.asset})),t);case 4:!(r=e.sent)||K.current!==E.l.Success&&K.current!==E.l.Failed||(z(!1),ue(!1),Z(r),B({bagExpanded:!1}),T());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ie=Object(A.useCallback)((function(){B({bagExpanded:!1,manualClose:!0})}),[B]),Ee=function(){var e=Object(i.a)(s.a.mark((function e(){var n,r,a,i,o,l,u,d,j,f,O,g;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ae.filter((function(e){return e.status!==E.c.UNAVAILABLE})).map((function(e){return e.asset})),r=Object(k.b)(n.reduce((function(e,t){return e.add(b.a.from(t.priceInfo.ETHPrice))}),b.a.from(0)).toString()),I&&y(!1),!S&&z(!0),N(E.d.FETCHING_ROUTE),e.prev=5,e.next=8,$.fetchQuery(["assetsRoute",r,n,t],(function(){return Object(V.f)({toSell:[r],toBuy:n,senderAddress:null!==t&&void 0!==t?t:""})}));case 8:a=e.sent,i=Object(re.a)(n,a.route),o=i.filter((function(e){return e.updatedPriceInfo})).sort(k.H),l=i.filter((function(e){return e.isUnavailable})),u=i.filter((function(e){return!e.updatedPriceInfo&&!e.isUnavailable})),d=u.length>0,j=o.length>0,f=l.length>0,O=d||j||f,g=j||f,P([].concat(Object(c.a)(l.map((function(e){return{asset:e,status:E.c.UNAVAILABLE}}))),Object(c.a)(o.map((function(e){return{asset:e,status:E.c.REVIEWING_PRICE_CHANGE}}))),Object(c.a)(u.map((function(e){return{asset:e,status:E.c.REVIEWED}}))))),z(!1),O?g?N(j?E.d.IN_REVIEW:E.d.CONFIRM_REVIEW):(Ne(a),N(E.d.CONFIRMING_IN_WALLET)):N(E.d.ADDING_TO_BAG),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(5),N(E.d.ADDING_TO_BAG);case 26:case"end":return e.stop()}}),e,null,[[5,23]])})));return function(){return e.apply(this,arguments)}}();Object(A.useEffect)((function(){H.n.subscribe((function(e){return K.current=e.state}))}),[]),Object(A.useEffect)((function(){S&&!le&&ue(!0)}),[S,le]),Object(A.useEffect)((function(){K.current===E.l.Confirming&&N(E.d.PROCESSING_TRANSACTION),K.current!==E.l.Denied&&K.current!==E.l.Invalid||(K.current===E.l.Invalid?N(E.d.WARNING):N(E.d.CONFIRM_REVIEW),Q(E.l.New),z(!1),ue(!1))}),[K.current]),Object(A.useEffect)((function(){L(ve),G(we)}),[ve,we,L,G]);var ke=ae.length>0,Ae=ae.length>0,ye=u.length>0,Se=Boolean(!U&&!Ae&&h===E.d.ADDING_TO_BAG||U&&!ye),Te=Object(A.useMemo)((function(){return Object(l.a)({usd_value:we},Object(k.l)(ae.map((function(e){return e.asset}))))}),[ae,we]);return R&&W?Object(C.jsxs)(te.a,{children:[U&&g===E.i.LISTING?Object(C.jsx)(ee,{}):Object(C.jsxs)(v.b,{zIndex:q||le?"modalOverTooltip":"3",className:"_1jcz50r3 rgw6ez459 rgw6ez3bl rgw6ez3fg rgw6ez153 rgw6ez1br rgw6ez363 rgw6ez4m3 rgw6ez79x rgw6ez4y3 rgw6ez7j5 rgw6ez4ax",children:[Object(C.jsx)(Le,{numberOfAssets:U?u.length:ae.length,closeBag:Ie,resetFlow:U?a:T,isProfilePage:U}),Se&&Object(C.jsx)(Be,{}),Object(C.jsx)(Me,{top:!0,show:je&&pe>0}),Object(C.jsx)(v.b,{ref:function(e){if(null!==e){var t=e.scrollHeight>e.clientHeight;t!==je&&fe(t)}},className:"_1jcz50r1 rgw6ez2al rgw6ez2g3 rgw6ez1vr rgw6ez7mt",onScroll:function(e){var t=e.currentTarget.scrollTop,n=e.currentTarget.clientHeight,r=e.currentTarget.scrollHeight;xe(t?(t+n)/r*100:0)},gap:"12",children:U?Object(C.jsx)(Fe,{}):Object(C.jsx)(ze,{})}),ke&&!U&&Object(C.jsx)(D,{totalEthPrice:ve,totalUsdPrice:we,bagStatus:h,fetchAssets:Ee,eventProperties:Te}),ye&&U&&Object(C.jsx)(m.b,{marginTop:"32",marginX:"28",paddingY:"10",className:"".concat(w.e," ").concat(w.h),backgroundColor:"accentAction",color:"white",textAlign:"center",onClick:function(){q&&_(),p(E.i.LISTING)},children:"Continue"})]}),M?Object(C.jsx)(Ue,{onClick:_}):le&&Object(C.jsx)(ne.a,{onClick:function(){return S?void 0:ue(!1)}})]}):null}}}]);
//# sourceMappingURL=6.73ac7b9f.chunk.js.map